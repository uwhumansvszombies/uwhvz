{% extends "base.html" %}

{% block content %}
<header class="ui-titlebar">
  <div class="ui-titlebar__section" id="titlebar-logo">
    <a href="{{ url('dashboard') }}">{{ svg('site-logo-dark') }}</a>
  </div>
  <div class="ui-titlebar__section" id="titlebar-title">
    <div class="ui-titlebar__content">
      <h1 class="ui-titlebar__breadcrumbs">{% block pagetitle %}{% endblock %}</h1>
      <h2 class="ui-titlebar__page-title">{% block pagesubtitle %}{% endblock %}</h2>
    </div>
  </div>
  <div class="ui-titlebar__section">
    {% if user.is_authenticated %}
    <a class="ui-titlebar__link" href="{{ url('logout') }}">Logout</a>
    {% else %}
    <a class="ui-titlebar__link" href="{{ url('login') }}">Login</a>
    {% endif %}
  </div>
</header>

<nav class="ui-sidebar">
  <ul class="ui-sidebar-nav">
    <li><a href="{{ url('dashboard') }}">My Dashboard</a></li>
  </ul>
  {% if game is defined and game.is_running %}
    <ul class="ui-sidebar-nav">
      <h1 class="ui-sidebar-nav__title">Game Actions</h1>
      <li><a href="{{ url('player_info') }}">Player Dashboard</a></li>
      <li><a href="/dashboard/game_info/">Game Info</a></li>
      <li><a href="{{ url('player_list') }}">Player List</a></li>
      {% if (player and not player.is_human) or user.is_moderator %}
        <li><a href="#">Zombie Tree</a></li>
      {% endif %}
    </ul>
  {% endif %}
  {% if user.is_moderator %}
    <ul class="ui-sidebar-nav">
      <h1 class="ui-sidebar-nav__title">Moderator Actions</h1>
      <li><a href="{{ url('manage_players') }}">Manage Players</a></li>
      <li><a href="#">Manage OZ Pool</a></li>
      <li><a href="{{ url('generate_supply_codes') }}">Generate Supply Codes</a></li>
      <li><a href="/cms">Post Announcements & Missions (Wagtail)</a></li>
    </ul>
  {% endif %}
  {% if user.is_staff %}
    <ul class="ui-sidebar-nav">
      <h1 class="ui-sidebar-nav__title">Webmaster Actions</h1>
      <li><a href="{{ url('admin:index') }}">Site Management (Django Admin)</a></li>
    </ul>
  {% endif %}
</nav>

<main class="ui-layout ui-layout--dashboard">
  <section class="ui-layout__item">
    {% if messages %}
      {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      {% endfor %}
    {% endif %}
    {% block subcontent %}{% endblock %}
  </section>
</main>
{% endblock %}
